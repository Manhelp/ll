--s57,s60大小boss
--神区小boss
local god_ltboss = {}
god_ltboss[1] = {mapid = 52648950,x = 106,y = 10000,z = 136}
god_ltboss[2] = {mapid = 52648950,x = 106,y = 10000,z = 229}
god_ltboss[3] = {mapid = 52648950,x = 63,y = 10000,z = 314}
god_ltboss[4] = {mapid = 52648950,x = 107,y = 10000,z = 345}
god_ltboss[5] = {mapid = 52648950,x = 168,y = 10000,z = 107}
god_ltboss[6] = {mapid = 52648950,x = 212,y = 10000,z = 270}
god_ltboss[7] = {mapid = 52648950,x = 316,y = 10000,z = 427}
god_ltboss[8] = {mapid = 52648950,x = 316,y = 10000,z = 209}
god_ltboss[9] = {mapid = 52648950,x = 353,y = 10000,z = 59}
god_ltboss[10] = {mapid = 52648950,x = 468,y = 10000,z = 448}
god_ltboss[11] = {mapid = 52648950,x = 489,y = 10000,z = 301}
god_ltboss[12] = {mapid = 52648950,x = 464,y = 10000,z = 168}
god_ltboss[13] = {mapid = 52648950,x = 448,y = 10000,z = 78}
god_ltboss[14] = {mapid = 52648182,x = 441,y = 9999,z = 440}
god_ltboss[15] = {mapid = 52648182,x = 454,y = 9999,z = 270}
god_ltboss[16] = {mapid = 52648182,x = 456,y = 9999,z = 173}
god_ltboss[17] = {mapid = 52648182,x = 450,y = 9999,z = 74}
god_ltboss[18] = {mapid = 52648182,x = 332,y = 9999,z = 146}
god_ltboss[19] = {mapid = 52648182,x = 213,y = 9999,z = 90}
god_ltboss[20] = {mapid = 52648182,x = 74,y = 9999,z = 114}
god_ltboss[21] = {mapid = 52648182,x = 28,y = 9999,z = 378}
god_ltboss[22] = {mapid = 52648182,x = 348,y = 9999,z = 351}
god_ltboss[23] = {mapid = 52648182,x = 285,y = 9999,z = 397}
god_ltboss[24] = {mapid = 52648438,x = 50,y = 10000,z = 157}
god_ltboss[25] = {mapid = 52648438,x = 146,y = 10000,z = 88}
god_ltboss[26] = {mapid = 52648438,x = 395,y = 10000,z = 54}
god_ltboss[27] = {mapid = 52648438,x = 494,y = 10000,z = 243}
god_ltboss[28] = {mapid = 52648438,x = 174,y = 10000,z = 378}
god_ltboss[29] = {mapid = 52648438,x = 85,y = 10000,z = 328}
god_ltboss[30] = {mapid = 52648438,x = 464,y = 10000,z = 305}
god_ltboss[31] = {mapid = 52648438,x = 392,y = 10000,z = 475}
--local god_boss = {}
local evil_ltboss = {}
evil_ltboss[1] = {mapid = 52649974,x = 550,y = 40,z = 798}
evil_ltboss[2] = {mapid = 52649974,x = 771,y = 40,z = 622}
evil_ltboss[3] = {mapid = 52649974,x = 903,y = 40,z = 757}
evil_ltboss[4] = {mapid = 52649974,x = 515,y = 40,z = 488}
evil_ltboss[5] = {mapid = 52649974,x = 621,y = 40,z = 161}
evil_ltboss[6] = {mapid = 52649974,x = 249,y = 40,z = 766}
evil_ltboss[7] = {mapid = 52649974,x = 113,y = 40,z = 384}
evil_ltboss[8] = {mapid = 52649206,x = 841,y = 20,z = 586}
evil_ltboss[9] = {mapid = 52649206,x = 768,y = 20,z = 646}
evil_ltboss[10] = {mapid = 52649206,x = 553,y = 20,z = 684}
evil_ltboss[11] = {mapid = 52649206,x = 527,y = 20,z = 761}
evil_ltboss[12] = {mapid = 52649206,x = 650,y = 20,z = 422}
evil_ltboss[13] = {mapid = 52649206,x = 849,y = 20,z = 325}
evil_ltboss[14] = {mapid = 52649206,x = 902,y = 20,z = 243}
evil_ltboss[15] = {mapid = 52649206,x = 384,y = 20,z = 400}
evil_ltboss[16] = {mapid = 52649206,x = 264,y = 20,z = 449}
evil_ltboss[17] = {mapid = 52649206,x = 323,y = 20,z = 886}
evil_ltboss[18] = {mapid = 52649462,x = 692,y = 40,z = 626}
evil_ltboss[19] = {mapid = 52649462,x = 632,y = 40,z = 647}
evil_ltboss[20] = {mapid = 52649462,x = 769,y = 40,z = 568}
evil_ltboss[21] = {mapid = 52649462,x = 750,y = 40,z = 441}
evil_ltboss[22] = {mapid = 52649462,x = 633,y = 40,z = 460}
evil_ltboss[23] = {mapid = 52649462,x = 537,y = 40,z = 491}
evil_ltboss[24] = {mapid = 52649462,x = 387,y = 40,z = 471}
evil_ltboss[25] = {mapid = 52649462,x = 494,y = 40,z = 703}
evil_ltboss[26] = {mapid = 52649462,x = 276,y = 40,z = 657}
evil_ltboss[27] = {mapid = 52649462,x = 340,y = 40,z = 290}
evil_ltboss[28] = {mapid = 52649462,x = 436,y = 40,z = 210}
evil_ltboss[29] = {mapid = 52649462,x = 549,y = 40,z = 138}

local evil_boss ={}
evil_boss[1] = {mapid = 52649974,x = 507,y = 40,z = 592}
evil_boss[2] = {mapid = 52649974,x = 453,y = 40,z = 388}
evil_boss[3] = {mapid = 52649974,x = 950,y = 40,z = 833}
evil_boss[4] = {mapid = 52649974,x = 866,y = 40,z = 152}
evil_boss[5] = {mapid = 52649974,x = 216,y = 40,z = 668}
evil_boss[6] = {mapid = 52649206,x = 231,y = 20,z = 917}
evil_boss[7] = {mapid = 52649206,x = 410,y = 20,z = 919}
evil_boss[8] = {mapid = 52649206,x = 302,y = 20,z = 839}
evil_boss[9] = {mapid = 52649206,x = 287,y = 20,z = 642}
evil_boss[10] = {mapid = 52649206,x = 320,y = 20,z = 483}
evil_boss[11] = {mapid = 52649206,x = 419,y = 20,z = 414}
evil_boss[12] = {mapid = 52649206,x = 593,y = 20,z = 431}
evil_boss[13] = {mapid = 52649206,x = 657,y = 20,z = 471}
evil_boss[14] = {mapid = 52649206,x = 746,y = 20,z = 268}
evil_boss[15] = {mapid = 52649206,x = 863,y = 20,z = 171}
evil_boss[16] = {mapid = 52649206,x = 580,y = 20,z = 616}
evil_boss[17] = {mapid = 52649206,x = 612,y = 20,z = 670}
evil_boss[18] = {mapid = 52649206,x = 521,y = 20,z = 826}
evil_boss[19] = {mapid = 52649206,x = 769,y = 20,z = 580}
evil_boss[20] = {mapid = 52649206,x = 826,y = 20,z = 651}
evil_boss[21] = {mapid = 52649462,x = 558,y = 40,z = 167}
evil_boss[22] = {mapid = 52649462,x = 559,y = 40,z = 105}
evil_boss[23] = {mapid = 52649462,x = 459,y = 40,z = 222}
evil_boss[24] = {mapid = 52649462,x = 413,y = 40,z = 195}
evil_boss[25] = {mapid = 52649462,x = 320,y = 40,z = 280}
evil_boss[26] = {mapid = 52649462,x = 363,y = 40,z = 329}
evil_boss[27] = {mapid = 52649462,x = 330,y = 40,z = 445}
evil_boss[28] = {mapid = 52649462,x = 403,y = 41,z = 435}
evil_boss[29] = {mapid = 52649462,x = 403,y = 40,z = 516}
evil_boss[30] = {mapid = 52649462,x = 336,y = 40,z = 512}
evil_boss[31] = {mapid = 52649462,x = 380,y = 40,z = 470}
evil_boss[32] = {mapid = 52649462,x = 229,y = 40,z = 668}
evil_boss[33] = {mapid = 52649462,x = 288,y = 40,z = 637}
evil_boss[34] = {mapid = 52649462,x = 408,y = 40,z = 574}
evil_boss[35] = {mapid = 52649462,x = 421,y = 40,z = 637}
evil_boss[36] = {mapid = 52649462,x = 512,y = 40,z = 694}
evil_boss[37] = {mapid = 52649462,x = 471,y = 40,z = 730}
evil_boss[38] = {mapid = 52649462,x = 528,y = 40,z = 449}
evil_boss[39] = {mapid = 52649462,x = 568,y = 40,z = 545}
evil_boss[40] = {mapid = 52649462,x = 659,y = 40,z = 505}
evil_boss[41] = {mapid = 52649462,x = 639,y = 40,z = 397}
evil_boss[42] = {mapid = 52649462,x = 592,y = 40,z = 481}
evil_boss[43] = {mapid = 52649462,x = 720,y = 40,z = 430}
evil_boss[44] = {mapid = 52649462,x = 774,y = 40,z = 457}
evil_boss[45] = {mapid = 52649462,x = 793,y = 40,z = 529}
evil_boss[46] = {mapid = 52649462,x = 759,y = 40,z = 585}
evil_boss[47] = {mapid = 52649462,x = 622,y = 40,z = 620}
evil_boss[48] = {mapid = 52649462,x = 638,y = 40,z = 678}
evil_boss[49] = {mapid = 52649462,x = 679,y = 40,z = 588}
evil_boss[50] = {mapid = 52649462,x = 693,y = 40,z = 665}

function ZLP_godlittleboss()
	local index1 = math.random(31)
	local index2 = math.random(3)
	local scre = {1100178,1100179,1100180}
	map.MapCreateColCreature(god_ltboss[index1].mapid, 1, scre[index2], god_ltboss[index1].x, god_ltboss[index1].y, god_ltboss[index1].z, 1, "")
	local MsgID = msg.BeginMsgEvent()
	msg.AddMsgEvent(MsgID, 101, 444305)      		--xxx出现在了洞窟中的某处……
	msg.DispatchMapMsgEvent(MsgID, 52648950, 1)
	local MsgID = msg.BeginMsgEvent()
	msg.AddMsgEvent(MsgID, 101, 444305)      		--xxx出现在了洞窟中的某处……
	msg.DispatchMapMsgEvent(MsgID, 52648182, 1)
	local MsgID = msg.BeginMsgEvent()
	msg.AddMsgEvent(MsgID, 101, 444305)      		--xxx出现在了洞窟中的某处……
	msg.DispatchMapMsgEvent(MsgID, 52648438, 1)
end

function ZLP_evillittleboss()
	local index1 = math.random(29)
	local index2 = math.random(3)
	local scre = {1100192,1100193,1100194}
	map.MapCreateColCreature(evil_ltboss[index1].mapid, 1, scre[index2], evil_ltboss[index1].x, evil_ltboss[index1].y, evil_ltboss[index1].z, 1, "")
	local MsgID = msg.BeginMsgEvent()
	msg.AddMsgEvent(MsgID, 101, 444306)      		--xxx出现在了地穴中的某处……
	msg.DispatchMapMsgEvent(MsgID, 52649974, 1)
	local MsgID = msg.BeginMsgEvent()
	msg.AddMsgEvent(MsgID, 101, 444306)      		--xxx出现在了地穴中的某处……
	msg.DispatchMapMsgEvent(MsgID, 52649206, 1)
	local MsgID = msg.BeginMsgEvent()
	msg.AddMsgEvent(MsgID, 101, 444306)      		--xxx出现在了地穴中的某处……
	msg.DispatchMapMsgEvent(MsgID, 52649462, 1)
end

function ZLP_godboss()
	map.MapCreateColCreature(52649718, 1, 1100181, 132, 176, 119, 1, "")
	local MsgID = msg.BeginMsgEvent()
	msg.AddMsgEvent(MsgID, 101, 444307)      		--神王之灵已经出现在了魔窟第四层……
	msg.DispatchMapMsgEvent(MsgID, 52648950, 1)
	local MsgID = msg.BeginMsgEvent()
	msg.AddMsgEvent(MsgID, 101, 444307)      		--神王之灵已经出现在了魔窟第四层……
	msg.DispatchMapMsgEvent(MsgID, 52648182, 1)
	local MsgID = msg.BeginMsgEvent()
	msg.AddMsgEvent(MsgID, 101, 444307)      		--神王之灵已经出现在了魔窟第四层……
	msg.DispatchMapMsgEvent(MsgID, 52648438, 1)
end

function ZLP_evilboss()
	local index1 = math.random(50)
	map.MapCreateColCreature(evil_boss[index1].mapid, 1, 1100195, evil_boss[index1].x, evil_boss[index1].y, evil_boss[index1].z, 1, "")
	local MsgID = msg.BeginMsgEvent()
	msg.AddMsgEvent(MsgID, 101, 444308)      		--火河炼狱之王已经出现在了地穴中……
	msg.DispatchMapMsgEvent(MsgID, 52649974, 1)
	local MsgID = msg.BeginMsgEvent()
	msg.AddMsgEvent(MsgID, 101, 444308)      		--火河炼狱之王已经出现在了地穴中……
	msg.DispatchMapMsgEvent(MsgID, 52649206, 1)
	local MsgID = msg.BeginMsgEvent()
	msg.AddMsgEvent(MsgID, 101, 444308)      		--火河炼狱之王已经出现在了地穴中……
	msg.DispatchMapMsgEvent(MsgID, 52649462, 1)
end

--s57_3传送符
function I4820186_CanUse(MapID, InstanceID, TypeID, RoleID)
    local bRet, bIgnore = 0, false
	local canuse = role.GetEquipIDOnPos(RoleID, 13)
	if canuse ~= 8220401 and canuse ~= 8220403 and (canuse < 8220501 or canuse > 8220520) then
		bRet = 38
	end
	if role.GetRoleLevel(MapID, InstanceID, RoleID) < 80 then
		bRet = 35
	end
    return bRet, bIgnore
end
function I4820186_Use(MapID, InstanceID, TypeID, RoleID)
	local randomnum = math.random(4)
	if randomnum == 1 then
		role.RoleGotoNewMap(MapID, InstanceID, RoleID, 52648438, 37, 199, 49)
	elseif randomnum == 2 then
		role.RoleGotoNewMap(MapID, InstanceID, RoleID, 52648438, 32, 199, 470)
	elseif randomnum == 3 then
		role.RoleGotoNewMap(MapID, InstanceID, RoleID, 52648438, 478, 199, 466)
	elseif randomnum == 4 then
		role.RoleGotoNewMap(MapID, InstanceID, RoleID, 52648438, 462, 199, 41)
	end
end
aux.RegisterItemEvent(4820186, 0, "I4820186_CanUse")
aux.RegisterItemEvent(4820186, 1, "I4820186_Use")

--s57_5,6,7传送符
function I4820187_CanUse(MapID, InstanceID, TypeID, RoleID)
    local bRet, bIgnore = 0, false
	local canuse = role.GetEquipIDOnPos(RoleID, 13)
	if canuse ~= 8220402 and canuse ~= 8220404 and (canuse < 8220601 or canuse > 8220620) then
		bRet = 38
	end
	if role.GetRoleLevel(MapID, InstanceID, RoleID) < 80 then
		bRet = 35
	end
    return bRet, bIgnore
end
function I4820187_Use(MapID, InstanceID, TypeID, RoleID)
	--[[
	if math.random(100) > 80 then
		local index3 = math.random(29)
		role.RoleGotoNewMap(MapID, InstanceID, RoleID, evil_ltboss[index3].mapid, evil_ltboss[index3].x, evil_ltboss[index3].y/50, evil_ltboss[index3].z)
	else
	--]]
		local num = math.random(100)
		if num < 20 then
			role.RoleGotoNewMap(MapID, InstanceID, RoleID, 52649974, 440, 1, 768)
		elseif num < 40 then
			role.RoleGotoNewMap(MapID, InstanceID, RoleID, 52649206, 211, 1, 476)
		elseif num < 60 then
			role.RoleGotoNewMap(MapID, InstanceID, RoleID, 52649462, 621, 1, 135)
		elseif num < 80 then
			role.RoleGotoNewMap(MapID, InstanceID, RoleID, 52649974, 390, 1, 274)
		else
			role.RoleGotoNewMap(MapID, InstanceID, RoleID, 52649206, 889, 1, 394)
		end
	--end
end
aux.RegisterItemEvent(4820187, 0, "I4820187_CanUse")
aux.RegisterItemEvent(4820187, 1, "I4820187_Use")

