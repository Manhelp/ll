local Quest_30831 = {}
Quest_30831[50]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=10,TargetID2=4820070,Num2=10,RewMoney=99500, RewXP=486000,MsgID=20101}
Quest_30831[51]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=10,TargetID2=4820070,Num2=10,RewMoney=102000,RewXP=510000,MsgID=20101}
Quest_30831[52]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=10,TargetID2=4820070,Num2=10,RewMoney=104600,RewXP=530000,MsgID=20101}
Quest_30831[53]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=10,TargetID2=4820070,Num2=10,RewMoney=107300,RewXP=552000,MsgID=20101}
Quest_30831[54]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=10,TargetID2=4820070,Num2=10,RewMoney=110000,RewXP=578000,MsgID=20101}
Quest_30831[55]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=10,TargetID2=4820070,Num2=10,RewMoney=112800,RewXP=628000,MsgID=20101}
Quest_30831[56]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=10,TargetID2=4820070,Num2=10,RewMoney=115700,RewXP=654000,MsgID=20101}
Quest_30831[57]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=10,TargetID2=4820070,Num2=10,RewMoney=118600,RewXP=678000,MsgID=20101}
Quest_30831[58]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=10,TargetID2=4820070,Num2=10,RewMoney=121600,RewXP=704000,MsgID=20101}
Quest_30831[59]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=10,TargetID2=4820070,Num2=10,RewMoney=124700,RewXP=776000,MsgID=20101}
Quest_30831[60]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=15,TargetID2=4820070,Num2=15,RewMoney=127900,RewXP=1014000,MsgID=20102}
Quest_30831[61]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=15,TargetID2=4820070,Num2=15,RewMoney=131100,RewXP=1050000,MsgID=20102}
Quest_30831[62]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=15,TargetID2=4820070,Num2=15,RewMoney=134400,RewXP=1088000,MsgID=20102}
Quest_30831[63]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=15,TargetID2=4820070,Num2=15,RewMoney=137800,RewXP=1128000,MsgID=20102}
Quest_30831[64]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=15,TargetID2=4820070,Num2=15,RewMoney=141300,RewXP=1164000,MsgID=20102}
Quest_30831[65]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=15,TargetID2=4820070,Num2=15,RewMoney=144900,RewXP=1212000,MsgID=20102}
Quest_30831[66]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=15,TargetID2=4820070,Num2=15,RewMoney=148600,RewXP=1254000,MsgID=20102}
Quest_30831[67]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=15,TargetID2=4820070,Num2=15,RewMoney=152400,RewXP=1296000,MsgID=20102}
Quest_30831[68]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=15,TargetID2=4820070,Num2=15,RewMoney=156300,RewXP=1340000,MsgID=20102}
Quest_30831[69]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=15,TargetID2=4820070,Num2=15,RewMoney=160300,RewXP=1440000,MsgID=20102}
Quest_30831[70]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=20,TargetID2=4820070,Num2=20,RewMoney=164400,RewXP=2146000,MsgID=20103}
Quest_30831[71]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=20,TargetID2=4820070,Num2=20,RewMoney=168600,RewXP=2214000,MsgID=20103}
Quest_30831[72]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=20,TargetID2=4820070,Num2=20,RewMoney=172900,RewXP=2286000,MsgID=20103}
Quest_30831[73]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=20,TargetID2=4820070,Num2=20,RewMoney=177300,RewXP=2360000,MsgID=20103}
Quest_30831[74]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=20,TargetID2=4820070,Num2=20,RewMoney=181800,RewXP=2434000,MsgID=20103}
Quest_30831[75]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=20,TargetID2=4820070,Num2=20,RewMoney=186400,RewXP=2512000,MsgID=20103}
Quest_30831[76]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=20,TargetID2=4820070,Num2=20,RewMoney=191100,RewXP=2586000,MsgID=20103}
Quest_30831[77]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=20,TargetID2=4820070,Num2=20,RewMoney=195900,RewXP=2662000,MsgID=20103}
Quest_30831[78]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=20,TargetID2=4820070,Num2=20,RewMoney=200800,RewXP=2740000,MsgID=20103}
Quest_30831[79]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=20,TargetID2=4820070,Num2=20,RewMoney=205900,RewXP=4232000,MsgID=20103}
Quest_30831[80]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=25,TargetID2=4820070,Num2=25,RewMoney=211100,RewXP=4356000,MsgID=20104}
Quest_30831[81]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=25,TargetID2=4820070,Num2=25,RewMoney=216400,RewXP=4482000,MsgID=20104}
Quest_30831[82]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=25,TargetID2=4820070,Num2=25,RewMoney=221900,RewXP=4606000,MsgID=20104}
Quest_30831[83]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=25,TargetID2=4820070,Num2=25,RewMoney=227500,RewXP=4740000,MsgID=20104}
Quest_30831[84]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=25,TargetID2=4820070,Num2=25,RewMoney=233200,RewXP=4876000,MsgID=20104}
Quest_30831[85]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=25,TargetID2=4820070,Num2=25,RewMoney=239100,RewXP=5010000,MsgID=20104}
Quest_30831[86]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=25,TargetID2=4820070,Num2=25,RewMoney=245100,RewXP=5144000,MsgID=20104}
Quest_30831[87]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=25,TargetID2=4820070,Num2=25,RewMoney=251300,RewXP=5280000,MsgID=20104}
Quest_30831[88]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=25,TargetID2=4820070,Num2=25,RewMoney=257600,RewXP=5418000,MsgID=20104}
Quest_30831[89]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=25,TargetID2=4820070,Num2=25,RewMoney=264100,RewXP=5564000,MsgID=20104}
Quest_30831[90]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=30,TargetID2=4820070,Num2=30,RewMoney=270800,RewXP=6980000,MsgID=20105}
Quest_30831[91]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=30,TargetID2=4820070,Num2=30,RewMoney=277600,RewXP=7092000,MsgID=20105}
Quest_30831[92]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=30,TargetID2=4820070,Num2=30,RewMoney=284600,RewXP=7204000,MsgID=20105}
Quest_30831[93]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=30,TargetID2=4820070,Num2=30,RewMoney=291800,RewXP=7324000,MsgID=20105}
Quest_30831[94]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=30,TargetID2=4820070,Num2=30,RewMoney=299100,RewXP=7440000,MsgID=20105}
Quest_30831[95]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=30,TargetID2=4820070,Num2=30,RewMoney=306600,RewXP=7554000,MsgID=20105}
Quest_30831[96]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=30,TargetID2=4820070,Num2=30,RewMoney=314300,RewXP=7666000,MsgID=20105}
Quest_30831[97]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=30,TargetID2=4820070,Num2=30,RewMoney=322200,RewXP=7774000,MsgID=20105}
Quest_30831[98]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=30,TargetID2=4820070,Num2=30,RewMoney=330300,RewXP=7882000,MsgID=20105}
Quest_30831[99]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=30,TargetID2=4820070,Num2=30,RewMoney=338600,RewXP=7992000,MsgID=20105}
Quest_30831[100]={TargetType=QuestTargetType["Collect"],TargetID1=4820069,Num1=30,TargetID2=4820070,Num2=30,RewMoney=347100,RewXP=8100000,MsgID=20105}



--接取任务
function q30831_OnQuestInit(MapID, InstanceID, QuestID, RoleID, NPCID)
	local level = role.GetRoleLevel(MapID, InstanceID, RoleID)
	if level >= 100 then
		level = 100
	end
	--初始化任务的动态数据
	role.QuestInit(RoleID, QuestID, GetRandQuestTable(Quest_30831, level))
	--同步客户端总任务环数和任务说明
	local MsgID = msg.BeginMsgEvent()
	msg.AddMsgEvent(MsgID, 11, QuestID)
	msg.AddMsgEvent(MsgID, 1, Quest_30831[level].MsgID)
	msg.DispatchRoleMsgEvent(RoleID, MsgID)
end
aux.RegisterQuestEvent(30831, 7, "q30831_OnQuestInit")



function q30831_OnComplete(MapID, InstanceID, QuestID, RoleID, NPCID)	--玩家完成任务
	local num = role.GetRoleItemNum(RoleID, 4820064)
	local level = role.GetRoleLevel(MapID, InstanceID, RoleID)
	if level >= 100 then
		level = 100
	end
	role.AddRoleItem(MapID, InstanceID, RoleID, 4820062, 1, -1, 8, 420)
	role.AddRoleItem(MapID, InstanceID, RoleID, 4820067, 1, -1, 8, 420)
	if num >=1 then
		role.AddRoleExp(MapID, InstanceID, RoleID, Quest_30831[level].RewXP)
		role.RemoveFromRole(MapID, InstanceID, RoleID, 4820064, 1, 101)
    end
end



function q30831_OnCheckComplete(MapID, InstanceID, QuestID, RoleID, NPCID)
	local FreeSize = role.GetBagFreeSize(RoleID)
	if(FreeSize < 2) then
		--提示玩家背包空间不足
		local MsgID = msg.BeginMsgEvent()
		msg.AddMsgEvent(MsgID, 26, 100003)--需要至少x格背包空间才可继续操作
		msg.AddMsgEvent(MsgID, 9, 2)
		msg.DispatchRoleMsgEvent(RoleID, MsgID)
		return 0
	end
	return 1
end


aux.RegisterQuestEvent(30831, 1, "q30831_OnComplete")
aux.RegisterQuestEvent(30831, 5, "q30831_OnCheckComplete")
