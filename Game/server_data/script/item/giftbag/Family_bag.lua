function I4800121_GiftBag(MapID, InstanceID, TypeID, TargetID)
	--玩家ID， 生成物品TypeID，数量，品质，生成模式，log用网络消息枚举
	local r = math.random(1000)
	local temp = 0
	local index = 1
	local tbl = {}
	tbl[4800121] = {}
	tbl[4800121][1] = {3070018,1,15}
	tbl[4800121][2] = {3070056,1,15}
	tbl[4800121][3] = {3070056,2,5}
	tbl[4800121][4] = {3070056,4,2}
	tbl[4800121][5] = {3070024,1,15}
	tbl[4800121][6] = {3070026,1,5}
	tbl[4800121][7] = {3070060,1,15}
	tbl[4800121][8] = {3070060,2,5}
	tbl[4800121][9] = {3070060,4,3}
	tbl[4800121][10] = {3070051,1,10}
	tbl[4800121][11] = {4080049,2,2}
	tbl[4800121][12] = {4080050,2,2}
	tbl[4800121][13] = {4080051,2,2}
	tbl[4800121][14] = {4080052,2,2}
	tbl[4800121][15] = {4080053,2,2}
	tbl[4800122] = {}
	tbl[4800122][1] = {3070018,1,5}
	tbl[4800122][2] = {3070018,2,2}
	tbl[4800122][3] = {3070056,1,2}
	tbl[4800122][4] = {3070056,2,5}
	tbl[4800122][5] = {3070056,4,2}
	tbl[4800122][6] = {3070026,1,2}
	tbl[4800122][7] = {3070028,1,2}
	tbl[4800122][8] = {3020057,2,15}
	tbl[4800122][9] = {3020057,4,5}
	tbl[4800122][10] = {4090007,2,5}
	tbl[4800122][11] = {3070022,1,3}
	tbl[4800122][12] = {3070022,2,1}
	tbl[4800122][13] = {3030072,1,2}
	tbl[4800122][14] = {3030080,1,2}
	tbl[4800122][15] = {3050012,2,5}
	tbl[4800122][16] = {3050013,2,3}
	tbl[4800122][17] = {4800120,2,8}
	tbl[4800122][18] = {4800120,4,4}
	tbl[4800122][19] = {4820027,2,5}
	tbl[4800122][20] = {3020010,2,5}
	tbl[4800122][21] = {3050109,5,2}
	tbl[4800122][22] = {4090001,3,8}
	tbl[4800122][23] = {4211701,1,6}
	tbl[4800122][24] = {3020082,1,1}
	tbl[4800123] = {}
	tbl[4800123][1] = {3070018,1,2}
	tbl[4800123][2] = {3070018,2,1}
	tbl[4800123][3] = {3070018,5,1}
	tbl[4800123][4] = {3070056,1,1}
	tbl[4800123][5] = {3070056,2,2}
	tbl[4800123][6] = {3070056,4,1}
	tbl[4800123][7] = {3070026,1,1}
	tbl[4800123][8] = {3070028,1,1}
	tbl[4800123][9] = {3020057,2,11}
	tbl[4800123][10] = {3020057,4,5}
	tbl[4800123][11] = {4090008,2,6}
	tbl[4800123][12] = {4090008,5,3}
	tbl[4800123][13] = {4090016,5,6}
	tbl[4800123][14] = {4090016,10,3}
	tbl[4800123][15] = {4090015,5,6}
	tbl[4800123][16] = {4090015,10,3}
	tbl[4800123][17] = {3070022,1,2}
	tbl[4800123][18] = {3070022,2,1}
	tbl[4800123][19] = {3030072,1,1}
	tbl[4800123][20] = {3030080,1,1}
	tbl[4800123][21] = {3050017,2,4}
	tbl[4800123][22] = {3050018,2,2}
	tbl[4800123][23] = {4800120,4,4}
	tbl[4800123][24] = {4800120,8,2}
	tbl[4800123][25] = {4820027,2,4}
	tbl[4800123][26] = {4820027,4,2}
	tbl[4800123][27] = {3020082,1,1}
	tbl[4800123][28] = {3020084,1,0.5}
	tbl[4800123][29] = {3020010,2,1}
	tbl[4800123][30] = {3050109,5,4}
	tbl[4800123][31] = {3050109,10,2}
	tbl[4800123][32] = {3050112,2,1}
	tbl[4800123][33] = {4090002,3,5}
	tbl[4800123][34] = {4090017,1,1}
	tbl[4800123][35] = {4211701,1,3.5}
	tbl[4800123][36] = {4820024,2,5}
	tbl[4800124] = {}
	tbl[4800124][1] = {3070018,1,2}
	tbl[4800124][2] = {3070018,2,1}
	tbl[4800124][3] = {3070018,5,1}
	tbl[4800124][4] = {3070056,1,1}
	tbl[4800124][5] = {3070056,2,2}
	tbl[4800124][6] = {3070056,4,1}
	tbl[4800124][7] = {3070026,1,1}
	tbl[4800124][8] = {3070028,1,1}
	tbl[4800124][9] = {3020057,2,10}
	tbl[4800124][10] = {3020057,4,4}
	tbl[4800124][11] = {4090009,2,6}
	tbl[4800124][12] = {4090009,5,3}
	tbl[4800124][13] = {4090011,2,6}
	tbl[4800124][14] = {4090011,5,3}
	tbl[4800124][15] = {4090010,2,6}
	tbl[4800124][16] = {4090010,5,3}
	tbl[4800124][17] = {3070022,1,2}
	tbl[4800124][18] = {3070022,2,1}
	tbl[4800124][19] = {3030072,2,1}
	tbl[4800124][20] = {3030080,2,1}
	tbl[4800124][21] = {3050022,2,2}
	tbl[4800124][22] = {3050023,2,1}
	tbl[4800124][23] = {4800120,4,4}
	tbl[4800124][24] = {4800120,8,2}
	tbl[4800124][25] = {4820027,2,4}
	tbl[4800124][26] = {4820027,4,2}
	tbl[4800124][27] = {3020082,1,1}
	tbl[4800124][28] = {3020084,1,0.5}
	tbl[4800124][29] = {3020087,1,0.1}
	tbl[4800124][30] = {3020010,2,1}
	tbl[4800124][31] = {3020066,1,0.4}
	tbl[4800124][32] = {3050109,5,4}
	tbl[4800124][33] = {3050109,10,2}
	tbl[4800124][34] = {3050112,2,1}
	tbl[4800124][35] = {4090002,3,2}
	tbl[4800124][36] = {4090003,3,4}
	tbl[4800124][37] = {4090017,1,1}
	tbl[4800124][38] = {4211701,1,2}
	tbl[4800124][39] = {4820024,2,6}
	tbl[4800124][40] = {4820024,5,3}
	tbl[4800124][41] = {4820024,10,1}
	tbl[4800125] = {}
    tbl[4800125][1] = {3070018,1,1}
	tbl[4800125][2] = {3070018,2,1}
	tbl[4800125][3] = {3070018,5,1}
	tbl[4800125][4] = {3070056,1,1}
	tbl[4800125][5] = {3070056,2,1}
	tbl[4800125][6] = {3070056,4,1}
	tbl[4800125][7] = {3070026,1,1}
	tbl[4800125][8] = {3070028,1,1}
	tbl[4800125][9] = {3020057,3,10}
	tbl[4800125][10] = {3020057,5,4}
	tbl[4800125][11] = {4090009,2,6}
	tbl[4800125][12] = {4090009,5,3}
	tbl[4800125][13] = {4090011,2,6}
	tbl[4800125][14] = {4090011,5,3}
	tbl[4800125][15] = {4090011,10,1}
	tbl[4800125][16] = {4090010,2,6}
	tbl[4800125][17] = {4090010,5,3}
	tbl[4800125][18] = {4090010,10,1}
	tbl[4800125][19] = {3070022,1,1}
	tbl[4800125][20] = {3070022,2,1}
	tbl[4800125][21] = {3030072,2,1}
	tbl[4800125][22] = {3030080,2,1}
	tbl[4800125][23] = {3050022,2,1}
	tbl[4800125][24] = {3050023,2,1}
	tbl[4800125][25] = {4800120,4,3}
	tbl[4800125][26] = {4800120,8,1}
	tbl[4800125][27] = {4820027,2,4}
	tbl[4800125][28] = {4820027,4,2}
	tbl[4800125][29] = {3020082,1,2}
	tbl[4800125][30] = {3020084,1,1}
	tbl[4800125][31] = {3020087,1,0.5}
	tbl[4800125][32] = {3020010,2,1}
	tbl[4800125][33] = {3020066,1,0.5}
	tbl[4800125][34] = {3050109,5,1}
	tbl[4800125][35] = {3050109,10,1}
	tbl[4800125][36] = {3050112,2,1}
	tbl[4800125][37] = {4090003,3,6}
	tbl[4800125][38] = {4090003,6,3}
	tbl[4800125][39] = {4090017,1,2}
	tbl[4800125][40] = {4211701,1,2}
	tbl[4800125][41] = {4820024,2,6}
	tbl[4800125][42] = {4820024,5,3}
	tbl[4800125][43] = {4820024,10,1}
	tbl[4800125][44] = {4999004,1,1}
	tbl[4800125][45] = {4999005,1,1}


	for i = 1,#tbl[TypeID] do
	    temp = temp + tbl[TypeID][i][3]*10
		if temp >= r then
		    index = i
			break
		end
	end
	role.AddRoleItem(MapID, InstanceID, TargetID, tbl[TypeID][index][1], tbl[TypeID][index][2], 1, 8, 420)

end

function I4800121_CanUseGiftBag(MapID, InstanceID, TypeID, TargetID)
	local bRet, bIgnore = 0, false
	--判断背包空闲空间是否足够
	local FreeSize = role.GetBagFreeSize(TargetID)
	if(FreeSize < 1) then
		--提示玩家背包空间不足
		bRet = 40
	end
	return bRet, bIgnore
end

aux.RegisterItemEvent(4800121, 1, "I4800121_GiftBag")
aux.RegisterItemEvent(4800121, 0, "I4800121_CanUseGiftBag")
aux.RegisterItemEvent(4800122, 1, "I4800121_GiftBag")
aux.RegisterItemEvent(4800122, 0, "I4800121_CanUseGiftBag")
aux.RegisterItemEvent(4800123, 1, "I4800121_GiftBag")
aux.RegisterItemEvent(4800123, 0, "I4800121_CanUseGiftBag")
aux.RegisterItemEvent(4800124, 1, "I4800121_GiftBag")
aux.RegisterItemEvent(4800124, 0, "I4800121_CanUseGiftBag")
aux.RegisterItemEvent(4800125, 1, "I4800121_GiftBag")
aux.RegisterItemEvent(4800125, 0, "I4800121_CanUseGiftBag")


