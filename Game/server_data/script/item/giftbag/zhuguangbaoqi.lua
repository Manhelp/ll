function I4700100_GiftBag(MapID, InstanceID, TypeID, TargetID)
	--玩家ID， 生成物品TypeID，数量，品质，生成模式，log用网络消息枚举
	local r = math.random(10000)
	local temp = 0
	local index = 1
	local tbl = {}

	tbl[1] = {3030003,5,1,14}
	tbl[2] = {3030011,5,1,14}
	tbl[3] = {3030031,5,1,14}
	tbl[4] = {3030039,5,1,14}
	tbl[5] = {3030003,4,1,15}
	tbl[6] = {3030011,4,1,15}
	tbl[7] = {3030031,4,1,15}
	tbl[8] = {3030039,4,1,15}
	tbl[9] = {3030003,3,1,16}
	tbl[10] = {3030011,3,1,16}
	tbl[11] = {3030031,3,1,16}
	tbl[12] = {3030039,3,1,16}
	tbl[13] = {3030003,2,1,1522}
	tbl[14] = {3030011,2,1,1522}
	tbl[15] = {3030031,2,1,1522}
	tbl[16] = {3030039,2,1,1522}
	tbl[17] = {3030003,1,1,700}
	tbl[18] = {3030011,1,1,700}
	tbl[19] = {3030031,1,1,700}
	tbl[20] = {3030039,1,1,700}


	tbl[21] = {3030004,5,1,10}
	tbl[22] = {3030012,5,1,10}
	tbl[23] = {3030032,5,1,10}
	tbl[24] = {3030040,5,1,10}
	tbl[25] = {3030004,4,1,11}
	tbl[26] = {3030012,4,1,11}
	tbl[27] = {3030032,4,1,11}
	tbl[28] = {3030040,4,1,11}
	tbl[29] = {3030004,3,1,12}
	tbl[30] = {3030012,3,1,12}
	tbl[31] = {3030032,3,1,12}
	tbl[32] = {3030040,3,1,12}
	tbl[33] = {3030004,2,1,13}
	tbl[34] = {3030012,2,1,13}
	tbl[35] = {3030032,2,1,13}
	tbl[36] = {3030040,2,1,13}
	tbl[37] = {3030004,1,1,17}
	tbl[38] = {3030012,1,1,17}
	tbl[39] = {3030032,1,1,17}
	tbl[40] = {3030040,1,1,17}


	tbl[41] = {3030005,5,1,7}
	tbl[42] = {3030013,5,1,7}
	tbl[43] = {3030033,5,1,7}
	tbl[44] = {3030041,5,1,7}
	tbl[45] = {3030005,4,1,8}
	tbl[46] = {3030013,4,1,8}
	tbl[47] = {3030033,4,1,8}
	tbl[48] = {3030041,4,1,8}
	tbl[49] = {3030005,3,1,9}
	tbl[50] = {3030013,3,1,9}
	tbl[51] = {3030033,3,1,9}
	tbl[52] = {3030041,3,1,9}
	tbl[53] = {3030005,2,1,11}
	tbl[54] = {3030013,2,1,11}
	tbl[55] = {3030033,2,1,11}
	tbl[56] = {3030041,2,1,11}
	tbl[57] = {3030005,1,1,18}
	tbl[58] = {3030013,1,1,18}
	tbl[59] = {3030033,1,1,18}
	tbl[60] = {3030041,1,1,18}


	tbl[61] = {3030006,5,1,6}
	tbl[62] = {3030014,5,1,6}
	tbl[63] = {3030034,5,1,6}
	tbl[64] = {3030042,5,1,6}
	tbl[65] = {3030006,4,1,7}
	tbl[66] = {3030014,4,1,7}
	tbl[67] = {3030034,4,1,7}
	tbl[68] = {3030042,4,1,7}
	tbl[69] = {3030006,3,1,7}
	tbl[70] = {3030014,3,1,7}
	tbl[71] = {3030034,3,1,7}
	tbl[72] = {3030042,3,1,7}
	tbl[73] = {3030006,2,1,8}
	tbl[74] = {3030014,2,1,8}
	tbl[75] = {3030034,2,1,8}
	tbl[76] = {3030042,2,1,8}
	tbl[77] = {3030006,1,1,19}
	tbl[78] = {3030014,1,1,19}
	tbl[79] = {3030034,1,1,19}
	tbl[80] = {3030042,1,1,19}

	tbl[81] = {3030007,5,1,5}
	tbl[82] = {3030015,5,1,5}
	tbl[83] = {3030035,5,1,5}
	tbl[84] = {3030043,5,1,5}
	tbl[85] = {3030007,4,1,6}
	tbl[86] = {3030015,4,1,6}
	tbl[87] = {3030035,4,1,6}
	tbl[88] = {3030043,4,1,6}
	tbl[89] = {3030007,3,1,7}
	tbl[90] = {3030015,3,1,7}
	tbl[91] = {3030035,3,1,7}
	tbl[92] = {3030043,3,1,7}
	tbl[93] = {3030007,2,1,7}
	tbl[94] = {3030015,2,1,7}
	tbl[95] = {3030035,2,1,7}
	tbl[96] = {3030043,2,1,7}
	tbl[97] = {3030007,1,1,14}
	tbl[98] = {3030015,1,1,14}
	tbl[99] = {3030035,1,1,14}
	tbl[100] = {3030043,1,1,14}


	tbl[101] = {3030008,5,1,5}
	tbl[102] = {3030016,5,1,5}
	tbl[103] = {3030036,5,1,5}
	tbl[104] = {3030044,5,1,5}
	tbl[105] = {3030008,4,1,5}
	tbl[106] = {3030016,4,1,5}
	tbl[107] = {3030036,4,1,5}
	tbl[108] = {3030044,4,1,5}
	tbl[109] = {3030008,3,1,6}
	tbl[110] = {3030016,3,1,6}
	tbl[111] = {3030036,3,1,6}
	tbl[112] = {3030044,3,1,6}
	tbl[113] = {3030008,2,1,7}
	tbl[114] = {3030016,2,1,7}
	tbl[115] = {3030036,2,1,7}
	tbl[116] = {3030044,2,1,7}
	tbl[117] = {3030008,1,1,8}
	tbl[118] = {3030016,1,1,8}
	tbl[119] = {3030036,1,1,8}
	tbl[120] = {3030044,1,1,8}


	for i = 1,120 do
	    temp = temp + tbl[i][4]
		if temp >= r then
		    index = i
			break
		end
	end

	role.AddRoleItem(MapID, InstanceID, TargetID, tbl[index][1], tbl[index][2], tbl[index][3], 8, 420)

end

function I4700100_CanUseGiftBag(MapID, InstanceID, TypeID, TargetID)
	local bRet, bIgnore = 0, false
	--判断背包空闲空间是否足够
	local FreeSize = role.GetBagFreeSize(TargetID)
	if(FreeSize < 1) then
		--提示玩家背包空间不足
		bRet = 40
	end
	return bRet, bIgnore
end

aux.RegisterItemEvent(4700100, 1, "I4700100_GiftBag")
aux.RegisterItemEvent(4700100, 0, "I4700100_CanUseGiftBag")
